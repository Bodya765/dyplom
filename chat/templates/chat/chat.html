<div id="chat">
    <div id="messages"></div>
    <input type="text" id="messageInput" placeholder="Введіть повідомлення...">
    <button id="sendButton">Надіслати</button>
</div>

<script>
    const chatId = "{{ chat.id }}";
    const userId = "{{ request.user.id }}";
    const socket = new WebSocket(`ws://${window.location.host}/ws/chat/${chatId}/`);

    socket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        const messagesDiv = document.getElementById('messages');
        const messageElement = document.createElement('p');
        messageElement.textContent = `User ${data.sender_id}: ${data.message}`;
        messagesDiv.appendChild(messageElement);
    };

    document.getElementById('sendButton').onclick = function() {
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value;
        socket.send(JSON.stringify({
            'message': message,
            'sender_id': userId,
            'chat_id': chatId
        }));
        messageInput.value = '';
    };
</script>
